__d((function(g,r,i,a,m,_e,d){function e(e){var n=t();return function(){var t,s=r(d[0])(e);if(n){var o=r(d[0])(this).constructor;t=Reflect.construct(s,arguments,o)}else t=s.apply(this,arguments);return r(d[1])(this,t)}}function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}Object.defineProperty(_e,'__esModule',{value:!0});var n={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},s='finishReason',o=['heartbeatFailed','idleTimeout','documentHidden','finalTimeout','externalFinish','cancelled'],_=(function(t){"use strict";r(d[2])(s,t);var n=e(s);function s(e,t,o,_){var c;return r(d[3])(this,s),(c=n.call(this,_))._pushActivity=e,c._popActivity=t,c.transactionSpanId=o,c}return r(d[4])(s,[{key:"add",value:function(e){var t=this;e.spanId!==this.transactionSpanId&&(e.finish=function(n){e.endTimestamp='number'==typeof n?n:r(d[5]).timestampInSeconds(),t._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),r(d[6])(r(d[0])(s.prototype),"add",this).call(this,e)}}]),s})(r(d[7]).SpanRecorder),c=(function(t){"use strict";r(d[2])(l,t);var c=e(l);function l(e,t){var s,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.idleTimeout,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.finalTimeout,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.heartbeatInterval,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return r(d[3])(this,l),(s=c.call(this,e,t))._idleHub=t,s._idleTimeout=_,s._finalTimeout=h,s._heartbeatInterval=u,s._onScope=f,s.activities={},s._heartbeatCounter=0,s._finished=!1,s._idleTimeoutCanceledPermanently=!1,s._beforeFinishCallbacks=[],s._finishReason=o[4],f&&(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log(`Setting idle transaction on scope. Span ID: ${s.spanId}`),t.configureScope((function(e){return e.setSpan(r(d[8])(s))}))),s._restartIdleTimeout(),setTimeout((function(){s._finished||(s.setStatus('deadline_exceeded'),s._finishReason=o[3],s.finish())}),s._finalTimeout),s}return r(d[4])(l,[{key:"finish",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(d[5]).timestampInSeconds();if(this._finished=!0,this.activities={},'ui.action.click'===this.op&&this.setTag(s,this._finishReason),this.spanRecorder){for(var n of(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] finishing IdleTransaction',new Date(1e3*t).toISOString(),this.op),this._beforeFinishCallbacks))n(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((function(n){if(n.spanId===e.spanId)return!0;n.endTimestamp||(n.endTimestamp=t,n.setStatus('cancelled'),('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] cancelling span since transaction ended early',JSON.stringify(n,void 0,2)));var s=n.startTimestamp<t,o=(e._finalTimeout+e._idleTimeout)/1e3,_=n.endTimestamp-e.startTimestamp<o;if('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){var c=JSON.stringify(n,void 0,2);s?_||r(d[5]).logger.log('[Tracing] discarding Span since it finished after Transaction final timeout',c):r(d[5]).logger.log('[Tracing] discarding Span since it happened after Transaction was finished',c)}return s&&_})),('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] flushing IdleTransaction')}else('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] No active IdleTransaction');if(this._onScope){var o=this._idleHub.getScope();o.getTransaction()===this&&o.setSpan(void 0)}return r(d[6])(r(d[0])(l.prototype),"finish",this).call(this,t)}},{key:"registerBeforeFinishCallback",value:function(e){this._beforeFinishCallbacks.push(e)}},{key:"initSpanRecorder",value:function(e){var t=this;if(!this.spanRecorder){this.spanRecorder=new _((function(e){t._finished||t._pushActivity(e)}),(function(e){t._finished||t._popActivity(e)}),this.spanId,e),('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('Starting heartbeat'),this._pingHeartbeat()}this.spanRecorder.add(this)}},{key:"cancelIdleTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{restartOnChildSpanChange:!0},n=t.restartOnChildSpanChange;this._idleTimeoutCanceledPermanently=!1===n,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=o[5],this.finish(e)))}},{key:"setFinishReason",value:function(e){this._finishReason=e}},{key:"_restartIdleTimeout",value:function(e){var t=this;this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((function(){t._finished||0!==Object.keys(t.activities).length||(t._finishReason=o[1],t.finish(e))}),this._idleTimeout)}},{key:"_pushActivity",value:function(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] new activities count',Object.keys(this.activities).length)}},{key:"_popActivity",value:function(e){if(this.activities[e]&&(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log(`[Tracing] popActivity ${e}`),delete this.activities[e],('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] new activities count',Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var t=r(d[5]).timestampInSeconds();this._idleTimeoutCanceledPermanently?(this._finishReason=o[5],this.finish(t)):this._restartIdleTimeout(t+this._idleTimeout/1e3)}}},{key:"_beat",value:function(){if(!this._finished){var e=Object.keys(this.activities).join('');e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log('[Tracing] Transaction finished because of no change for 3 heart beats'),this.setStatus('deadline_exceeded'),this._finishReason=o[0],this.finish()):this._pingHeartbeat()}}},{key:"_pingHeartbeat",value:function(){var e=this;('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[5]).logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((function(){e._beat()}),this._heartbeatInterval)}}]),l})(r(d[9]).Transaction);_e.IdleTransaction=c,_e.IdleTransactionSpanRecorder=_,_e.TRACING_DEFAULTS=n}),496,[445,446,449,451,452,426,493,492,448,491]);