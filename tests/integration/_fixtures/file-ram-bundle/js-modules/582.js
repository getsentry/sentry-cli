__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,'__esModule',{value:!0});var e=!1;function n(n){var o=r(d[1]).WINDOW.Profiler;if('function'!=typeof o)return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.'),n;if(e)return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] Profiling has been disabled for the duration of the current user session.'),n;var t=r(d[2]).getCurrentHub().getClient(),_=t&&t.getOptions();if(!_)return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] Profiling disabled, no options found.'),n;var l=_.profilesSampleRate;if(!r(d[3]).isValidSampleRate(l))return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.warn('[Profiling] Discarding profile because of invalid sample rate.'),n;if(!l)return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0'),n;if(!(!0===l||Math.random()<l))return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(l)})`),n;var f,s=Math.floor(3e3);try{f=new o({sampleInterval:10,maxBufferSize:s})}catch(n){('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(r(d[0]).logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),r(d[0]).logger.log('[Profiling] Disabling profiling for current user session.')),e=!0}if(!f)return n;('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log(`[Profiling] started profiling transaction: ${n.name||n.description}`);var u=r(d[0]).uuid4();function p(){return E.apply(this,arguments)}function E(){return(E=r(d[4])((function*(){if(!n)return null;if(!f)return null;var e=n.startChild({description:'profiler.stop',op:'profiler'});return f.stop().then((function(o){return e.finish(),c&&(r(d[1]).WINDOW.clearTimeout(c),c=void 0),('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log(`[Profiling] stopped profiling of transaction: ${n.name||n.description}`),o?(r(d[3]).addProfileToMap(u,o),null):(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log(`[Profiling] profiler returned null profile for: ${n.name||n.description}`,'this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started'),null)})).catch((function(n){return e.finish(),('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] error while stopping profiler:',n),null}))}))).apply(this,arguments)}var c=r(d[1]).WINDOW.setTimeout((function(){('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] max profile duration elapsed, stopping profiling for:',n.name||n.description),p()}),3e4),D=n.finish.bind(n);return n.finish=function(){return n?(p().then((function(){n.setContext('profile',{profile_id:u}),D()}),(function(){D()})),n):D()},n}_e.MAX_PROFILE_DURATION_MS=3e4,_e.onProfilingStartRouteTransaction=function(e){return e?n(e):(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[0]).logger.log('[Profiling] Transaction is undefined, skipping profiling'),e)},_e.wrapTransactionWithProfiling=n}),582,[426,425,483,583,502]);