__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,'__esModule',{value:!0});var t=(function(){"use strict";function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;r(d[0])(this,t),this._maxlen=s,this.spans=[]}return r(d[1])(t,[{key:"add",value:function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}]),t})(),s=(function(){"use strict";function t(s){if(r(d[0])(this,t),this.traceId=r(d[2]).uuid4(),this.spanId=r(d[2]).uuid4().substring(16),this.startTimestamp=r(d[2]).timestampInSeconds(),this.tags={},this.data={},this.instrumenter='sentry',!s)return this;s.traceId&&(this.traceId=s.traceId),s.spanId&&(this.spanId=s.spanId),s.parentSpanId&&(this.parentSpanId=s.parentSpanId),'sampled'in s&&(this.sampled=s.sampled),s.op&&(this.op=s.op),s.description&&(this.description=s.description),s.data&&(this.data=s.data),s.tags&&(this.tags=s.tags),s.status&&(this.status=s.status),s.startTimestamp&&(this.startTimestamp=s.startTimestamp),s.endTimestamp&&(this.endTimestamp=s.endTimestamp),s.instrumenter&&(this.instrumenter=s.instrumenter)}return r(d[1])(t,[{key:"startChild",value:function(s){var n=new t(Object.assign({},s,{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.transaction){var p=`[Tracing] Starting '${s&&s.op||'< unknown op >'}' span on transaction '${n.transaction.name||'< unknown name >'}' (${n.transaction.spanId}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:p},r(d[2]).logger.log(p)}return n}},{key:"setTag",value:function(t,s){return this.tags=Object.assign({},this.tags,r(d[3])({},t,s)),this}},{key:"setData",value:function(t,s){return this.data=Object.assign({},this.data,r(d[3])({},t,s)),this}},{key:"setStatus",value:function(t){return this.status=t,this}},{key:"setHttpStatus",value:function(t){this.setTag('http.status_code',String(t)),this.setData('http.response.status_code',t);var s=n(t);return'unknown_error'!==s&&this.setStatus(s),this}},{key:"isSuccess",value:function(){return'ok'===this.status}},{key:"finish",value:function(t){if(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){var s=this.transaction.metadata.spanMetadata[this.spanId].logMessage;s&&r(d[2]).logger.log(s.replace('Starting','Finishing'))}this.endTimestamp='number'==typeof t?t:r(d[2]).timestampInSeconds()}},{key:"toTraceparent",value:function(){return r(d[2]).generateSentryTraceHeader(this.traceId,this.spanId,this.sampled)}},{key:"toContext",value:function(){return r(d[2]).dropUndefinedKeys({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}},{key:"updateWithContext",value:function(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}},{key:"getTraceContext",value:function(){return r(d[2]).dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}},{key:"toJSON",value:function(){return r(d[2]).dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}]),t})();function n(t){if(t<400&&t>=100)return'ok';if(t>=400&&t<500)switch(t){case 401:return'unauthenticated';case 403:return'permission_denied';case 404:return'not_found';case 409:return'already_exists';case 413:return'failed_precondition';case 429:return'resource_exhausted';default:return'invalid_argument'}if(t>=500&&t<600)switch(t){case 501:return'unimplemented';case 503:return'unavailable';case 504:return'deadline_exceeded';default:return'internal_error'}return'unknown_error'}e.Span=s,e.SpanRecorder=t,e.spanStatusfromHttpCode=n}),492,[451,452,426,489]);