__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,'__esModule',{value:!0});var t=(function(){"use strict";function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(d[0])(this,t),this.name=t.id,this._usePgNative=!!n.usePgNative}return r(d[1])(t,[{key:"loadDependency",value:function(){return this._module=this._module||r(d[2]).loadModule('pg')}},{key:"setupOnce",value:function(t,n){if(r(d[3]).shouldDisableAutoInstrumentation(n))('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[2]).logger.log('Postgres Integration is skipped because of instrumenter configuration.');else{var e=this.loadDependency();if(e)if(!this._usePgNative||r(d[4])._optionalChain([e,'access',function(t){return t.native},'optionalAccess',function(t){return t.Client}])){var o=(this._usePgNative?e.native:e).Client;r(d[2]).fill(o.prototype,'query',(function(t){return function(e,o,s){var u=n().getScope(),c=r(d[4])._optionalChain([u,'optionalAccess',function(t){return t.getSpan},'call',function(t){return t()}]),l={'db.system':'postgresql'};try{this.database&&(l['db.name']=this.database),this.host&&(l['server.address']=this.host),this.port&&(l['server.port']=this.port),this.user&&(l['db.user']=this.user)}catch(t){}var _=r(d[4])._optionalChain([c,'optionalAccess',function(t){return t.startChild},'call',function(t){return t({description:'string'==typeof e?e:e.text,op:'db',data:l})}]);if('function'==typeof s)return t.call(this,e,o,(function(t,n){r(d[4])._optionalChain([_,'optionalAccess',function(t){return t.finish},'call',function(t){return t()}]),s(t,n)}));if('function'==typeof o)return t.call(this,e,(function(t,n){r(d[4])._optionalChain([_,'optionalAccess',function(t){return t.finish},'call',function(t){return t()}]),o(t,n)}));var f=void 0!==o?t.call(this,e,o):t.call(this,e);return r(d[2]).isThenable(f)?f.then((function(t){return r(d[4])._optionalChain([_,'optionalAccess',function(t){return t.finish},'call',function(t){return t()}]),t})):(r(d[4])._optionalChain([_,'optionalAccess',function(t){return t.finish},'call',function(t){return t()}]),f)}}))}else('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[2]).logger.error("Postgres Integration was unable to access 'pg-native' bindings.");else('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[2]).logger.error('Postgres Integration was unable to require `pg` package.')}}}],[{key:"__initStatic",value:function(){this.id='Postgres'}}]),t})();t.__initStatic(),_e.Postgres=t}),553,[451,452,426,538,539]);