__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,'__esModule',{value:!0});var n=(function(){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useNestjs:!1};r(d[0])(this,n),this.name=n.id,this._useNest=!!t.useNestjs}return r(d[1])(n,[{key:"loadDependency",value:function(){return this._useNest?this._module=this._module||r(d[2]).loadModule('@nestjs/graphql'):this._module=this._module||r(d[2]).loadModule('apollo-server-core'),this._module}},{key:"setupOnce",value:function(n,o){if(r(d[3]).shouldDisableAutoInstrumentation(o))('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[2]).logger.log('Apollo Integration is skipped because of instrumenter configuration.');else if(this._useNest){var l=this.loadDependency();if(!l)return void(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[2]).logger.error('Apollo-NestJS Integration was unable to require @nestjs/graphql package.'));r(d[2]).fill(l.GraphQLFactory.prototype,'mergeWithSchema',(function(n){return function(){r(d[2]).fill(this.resolversExplorerService,'explore',(function(n){return function(){return t(r(d[2]).arrayify(n.call(this)),o)}}));for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return n.call.apply(n,[this].concat(s))}}))}else{var s=this.loadDependency();if(!s)return void(('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r(d[2]).logger.error('Apollo Integration was unable to require apollo-server-core package.'));r(d[2]).fill(s.ApolloServerBase.prototype,'constructSchema',(function(n){return function(){if(!this.config.resolvers)return('undefined'==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?(r(d[2]).logger.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),r(d[2]).logger.warn()):this.config.modules&&r(d[2]).logger.warn('Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property.'),r(d[2]).logger.error('Skipping tracing as no resolvers found on the `ApolloServer` instance.')),n.call(this);var l=r(d[2]).arrayify(this.config.resolvers);return this.config.resolvers=t(l,o),n.call(this)}}))}}}],[{key:"__initStatic",value:function(){this.id='Apollo'}}]),n})();function t(n,t){return n.map((function(n){return Object.keys(n).forEach((function(l){Object.keys(n[l]).forEach((function(s){'function'==typeof n[l][s]&&o(n,l,s,t)}))})),n}))}function o(n,t,o,l){r(d[2]).fill(n[t],o,(function(n){return function(){for(var s=l().getScope(),u=r(d[4])._optionalChain([s,'optionalAccess',function(n){return n.getSpan},'call',function(n){return n()}]),c=r(d[4])._optionalChain([u,'optionalAccess',function(n){return n.startChild},'call',function(n){return n({description:`${t}.${o}`,op:'graphql.resolve'})}]),f=arguments.length,p=new Array(f),_=0;_<f;_++)p[_]=arguments[_];var h=n.call.apply(n,[this].concat(p));return r(d[2]).isThenable(h)?h.then((function(n){return r(d[4])._optionalChain([c,'optionalAccess',function(n){return n.finish},'call',function(n){return n()}]),n})):(r(d[4])._optionalChain([c,'optionalAccess',function(n){return n.finish},'call',function(n){return n()}]),h)}}))}n.__initStatic(),e.Apollo=n}),558,[451,452,426,538,539]);