__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.NativeLinkedErrors=void 0;var t=r(d[0])(r(d[1])),n=r(d[0])(r(d[2])),s=r(d[0])(r(d[3])),u='cause',o=(function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,o),this.name=o.id,this._nativePackage=null,this._key=t.key||u,this._limit=t.limit||5}return(0,s.default)(o,[{key:"setupOnce",value:function(t,n){var s=this,u=n().getClient();u&&t((function(t,c){return(0,r(d[4]).__awaiter)(s,void 0,void 0,(function*(){null===this._nativePackage&&(this._nativePackage=yield this._fetchNativePackage());var s=n().getIntegration(o);return s?this._handler(u.getOptions().stackParser,s._key,s._limit,t,c):t}))}))}},{key:"_handler",value:function(n,s,u,o,c){return(0,r(d[4]).__awaiter)(this,void 0,void 0,(function*(){var l;if(!(o.exception&&o.exception.values&&c&&(0,r(d[5]).isInstanceOf)(c.originalException,Error)))return o;var v=yield this._walkErrorTree(n,u,c.originalException,s),f=v.exceptions,p=v.debugImages;return o.exception.values=[].concat((0,t.default)(o.exception.values),(0,t.default)(f)),o.debug_meta=o.debug_meta||{},o.debug_meta.images=o.debug_meta.images||[],(l=o.debug_meta.images).push.apply(l,(0,t.default)(p||[])),o}))}},{key:"_walkErrorTree",value:function(n,s,u,o){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return(0,r(d[4]).__awaiter)(this,void 0,void 0,(function*(){var v,f,p=u[o];if(!p||c.length+1>=s)return{exceptions:c,debugImages:l};if('stackElements'in p)v=this._exceptionFromJavaStackElements(p);else if('stackReturnAddresses'in p){var _=yield this._exceptionFromAppleStackReturnAddresses(p);v=_.appleException,f=_.appleDebugImages}else if((0,r(d[5]).isInstanceOf)(p,Error))v=(0,r(d[6]).exceptionFromError)(n,u[o]);else{if(!(0,r(d[5]).isPlainObject)(p))return{exceptions:c,debugImages:l};v={type:'string'==typeof p.name?p.name:void 0,value:'string'==typeof p.message?p.message:void 0}}return this._walkErrorTree(n,s,p,o,[].concat((0,t.default)(c),[v]),[].concat((0,t.default)(l),(0,t.default)(f||[])))}))}},{key:"_exceptionFromJavaStackElements",value:function(t){var n=this;return{type:t.name,value:t.message,stacktrace:{frames:t.stackElements.map((function(t){return{platform:'java',module:t.className,filename:t.fileName,lineno:t.lineNumber>=0?t.lineNumber:void 0,function:t.methodName,in_app:!(null===n._nativePackage||!t.className.startsWith(n._nativePackage))||void 0}})).reverse()}}}},{key:"_exceptionFromAppleStackReturnAddresses",value:function(t){return(0,r(d[4]).__awaiter)(this,void 0,void 0,(function*(){var n=yield this._fetchNativeStackFrames(t.stackReturnAddresses);return{appleException:{type:t.name,value:t.message,stacktrace:{frames:n&&n.frames.reverse()||[]}},appleDebugImages:n&&n.debugMetaImages||[]}}))}},{key:"_fetchNativePackage",value:function(){return r(d[7]).NATIVE.fetchNativePackageName()}},{key:"_fetchNativeStackFrames",value:function(t){return r(d[7]).NATIVE.fetchNativeStackFramesBy(t)}}]),o})();e.NativeLinkedErrors=o,o.id='NativeLinkedErrors'}),673,[598,429,451,452,602,426,424,603]);